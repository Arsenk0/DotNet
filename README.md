---

# .NET Backend Architecture Showcase

–¶–µ–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ–π —î –ø—Ä–∏–∫–ª–∞–¥–æ–º —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—ó —Ä—ñ–∑–Ω–∏—Ö –ø—ñ–¥—Ö–æ–¥—ñ–≤ –¥–æ –ø–æ–±—É–¥–æ–≤–∏ –±–µ–∫–µ–Ω–¥—É –Ω–∞ **.NET 9**. –†—ñ—à–µ–Ω–Ω—è —Å–∫–ª–∞–¥–∞—î—Ç—å—Å—è –∑ —Ç—Ä—å–æ—Ö –Ω–µ–∑–∞–ª–µ–∂–Ω–∏—Ö –ø—Ä–æ—î–∫—Ç—ñ–≤, –∫–æ–∂–µ–Ω –∑ —è–∫–∏—Ö –¥–µ–º–æ–Ω—Å—Ç—Ä—É—î —Å–ø–µ—Ü–∏—Ñ—ñ—á–Ω—ñ –ø–∞—Ç–µ—Ä–Ω–∏ –¥–æ—Å—Ç—É–ø—É –¥–æ –¥–∞–Ω–∏—Ö (SQL vs NoSQL), –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–Ω—ñ —Å—Ç–∏–ª—ñ (Clean Architecture, CQRS) —Ç–∞ –±—ñ–±–ª—ñ–æ—Ç–µ–∫–∏.

## üìÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ—î–∫—Ç—É

–†—ñ—à–µ–Ω–Ω—è —Ä–æ–∑–¥—ñ–ª–µ–Ω–µ –Ω–∞ —Ç—Ä–∏ –æ—Å–Ω–æ–≤–Ω—ñ —Å–µ—Ä–≤—ñ—Å–∏:

### 1. CatalogApp (SQL / EF Core)

–ö–ª–∞—Å–∏—á–Ω–∏–π REST API –¥–ª—è —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –∫–∞—Ç–∞–ª–æ–≥–æ–º —Ç–æ–≤–∞—Ä—ñ–≤.

* **–ë–∞–∑–∞ –¥–∞–Ω–∏—Ö:** SQLite (`catalog.db`).
* **ORM:** Entity Framework Core.
* **–ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞:** N-Layer architecture.
* **–ö–ª—é—á–æ–≤—ñ –ø–∞—Ç–µ—Ä–Ω–∏:**
* **Repository & Generic Repository:** –ê–±—Å—Ç—Ä–∞–∫—Ü—ñ—è –¥–æ—Å—Ç—É–ø—É –¥–æ –¥–∞–Ω–∏—Ö.
* **Specification Pattern:** –î–∏–Ω–∞–º—ñ—á–Ω–∞ –ø–æ–±—É–¥–æ–≤–∞ –∑–∞–ø–∏—Ç—ñ–≤ (—Ñ—ñ–ª—å—Ç—Ä–∞—Ü—ñ—è, —Å–æ—Ä—Ç—É–≤–∞–Ω–Ω—è, –ø–∞–≥—ñ–Ω–∞—Ü—ñ—è) –±–µ–∑ –∑–∞—Å–º—ñ—á–µ–Ω–Ω—è –∫–æ–Ω—Ç—Ä–æ–ª–µ—Ä—ñ–≤.
* **Global Exception Middleware:** –¶–µ–Ω—Ç—Ä–∞–ª—ñ–∑–æ–≤–∞–Ω–∞ –æ–±—Ä–æ–±–∫–∞ –ø–æ–º–∏–ª–æ–∫.



### 2. CatalogApp.Mongo (NoSQL / CQRS)

–°–µ—Ä–≤—ñ—Å –≤—ñ–¥–≥—É–∫—ñ–≤ —Ç–∞ —Ä–µ–π—Ç–∏–Ω–≥—ñ–≤, –æ–ø—Ç–∏–º—ñ–∑–æ–≤–∞–Ω–∏–π –¥–ª—è –≤–µ–ª–∏–∫–æ—ó –∫—ñ–ª—å–∫–æ—Å—Ç—ñ –æ–ø–µ—Ä–∞—Ü—ñ–π —á–∏—Ç–∞–Ω–Ω—è/–∑–∞–ø–∏—Å—É.

* **–ë–∞–∑–∞ –¥–∞–Ω–∏—Ö:** MongoDB.
* **–ü—ñ–¥—Ö—ñ–¥:** CQRS (Command Query Responsibility Segregation).
* **–ë—ñ–±–ª—ñ–æ—Ç–µ–∫–∏:** MediatR (–¥–ª—è —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—ó –∫–æ–º–∞–Ω–¥ —ñ –∑–∞–ø–∏—Ç—ñ–≤), MongoDB Driver.
* **–ö–ª—é—á–æ–≤—ñ –æ—Å–æ–±–ª–∏–≤–æ—Å—Ç—ñ:**
* **Vertical Slices:** –ö–æ–∂–Ω–∞ —Ñ—ñ—á–∞ (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, `CreateReview`, `GetProductStats`) –º–∞—î —Å–≤–æ—é –≤–ª–∞—Å–Ω—É –ø–∞–ø–∫—É –∑ —Ö–µ–Ω–¥–ª–µ—Ä–æ–º, –∫–æ–º–∞–Ω–¥–æ—é —Ç–∞ –≤–∞–ª—ñ–¥–∞—Ç–æ—Ä–æ–º.
* **Aggregation Pipeline:** –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –∞–≥—Ä–µ–≥–∞—Ü—ñ–π MongoDB –¥–ª—è —Ä–æ–∑—Ä–∞—Ö—É–Ω–∫—É —Å–µ—Ä–µ–¥–Ω—å–æ–≥–æ —Ä–µ–π—Ç–∏–Ω–≥—É.
* **Nested Documents:** –ó–±–µ—Ä–µ–∂–µ–Ω–Ω—è –∫–æ–º–µ–Ω—Ç–∞—Ä—ñ–≤ –≤—Å–µ—Ä–µ–¥–∏–Ω—ñ –¥–æ–∫—É–º–µ–Ω—Ç—É –≤—ñ–¥–≥—É–∫—É.



### 3. CatalogApp.AdoDapper (High Performance / SQL)

–°–µ—Ä–≤—ñ—Å –∑–∞–º–æ–≤–ª–µ–Ω—å, –¥–µ –∫—Ä–∏—Ç–∏—á–Ω–∞ —à–≤–∏–¥–∫—ñ—Å—Ç—å —Ç–∞ –∫–æ–Ω—Ç—Ä–æ–ª—å –Ω–∞–¥ —Ç—Ä–∞–Ω–∑–∞–∫—Ü—ñ—è–º–∏.

* **–ë–∞–∑–∞ –¥–∞–Ω–∏—Ö:** PostgreSQL.
* **ORM:** Dapper (Micro-ORM) + ADO.NET.
* **–ö–ª—é—á–æ–≤—ñ –ø–∞—Ç–µ—Ä–Ω–∏:**
* **Unit of Work:** –£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü—ñ—è–º–∏ (Commit/Rollback) –Ω–∞ —Ä—ñ–≤–Ω—ñ –±—ñ–∑–Ω–µ—Å-–æ–ø–µ—Ä–∞—Ü—ñ—ó.
* **Manual Mapping:** –ü–æ–≤–Ω–∏–π –∫–æ–Ω—Ç—Ä–æ–ª—å –Ω–∞–¥ SQL –∑–∞–ø–∏—Ç–∞–º–∏ –¥–ª—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ—ó –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ.



---

## üõ† –¢–µ—Ö–Ω–æ–ª–æ–≥—ñ—á–Ω–∏–π —Å—Ç–µ–∫

* **Framework:** .NET 9.0
* **Data Access:** Entity Framework Core, Dapper, MongoDB.Driver
* **Validation:** FluentValidation
* **Mapping:** AutoMapper
* **Documentation:** Swagger / OpenAPI
* **Databases:** SQLite, PostgreSQL, MongoDB

---

## üöÄ –Ø–∫ –∑–∞–ø—É—Å—Ç–∏—Ç–∏

### –ü–æ–ø–µ—Ä–µ–¥–Ω—ñ –≤–∏–º–æ–≥–∏

* .NET 9 SDK
* Docker (–¥–ª—è –∑–∞–ø—É—Å–∫—É PostgreSQL —Ç–∞ MongoDB)

### –ö—Ä–æ–∫ 1: –ó–∞–ø—É—Å–∫ —ñ–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∏

–ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—è, —â–æ —É –≤–∞—Å –∑–∞–ø—É—â–µ–Ω—ñ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏ –¥–ª—è Postgres —Ç–∞ Mongo (–∞–±–æ –ª–æ–∫–∞–ª—å–Ω—ñ —Å–µ—Ä–≤–µ—Ä–∏).

* **PostgreSQL:** Connection string –æ—á—ñ–∫—É—î –ø–æ—Ä—Ç `5432`, user `arsenkhomiak`, database `orders_db`.
* **MongoDB:** Connection string –æ—á—ñ–∫—É—î `mongodb://localhost:27017`.

### –ö—Ä–æ–∫ 2: –ó–∞–ø—É—Å–∫ –ø—Ä–æ—î–∫—Ç—ñ–≤

**CatalogApp (SQLite - –±–∞–∑–∞ —Å—Ç–≤–æ—Ä–∏—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ):**

```bash
cd CatalogApp
dotnet run
# Swagger: http://localhost:5129/swagger

```

**CatalogApp.Mongo:**

```bash
cd CatalogApp.Mongo
dotnet run
# Swagger: http://localhost:5129/swagger (–ø–æ—Ä—Ç –º–æ–∂–µ –≤—ñ–¥—Ä—ñ–∑–Ω—è—Ç–∏—Å—è, –ø–µ—Ä–µ–≤—ñ—Ä—Ç–µ launchSettings.json)

```

**CatalogApp.AdoDapper:**

```bash
cd CatalogApp.AdoDapper
dotnet run
# –°–ª—É—Ö–∞—î –ø–æ—Ä—Ç 5200 –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º
# Swagger: http://localhost:5200/swagger

```

---

## üìö –ü—Ä–∏–∫–ª–∞–¥–∏ –∫–æ–¥—É

### –ü–∞—Ç–µ—Ä–Ω –°–ø–µ—Ü–∏—Ñ—ñ–∫–∞—Ü—ñ—è (EF Core)

–î–æ–∑–≤–æ–ª—è—î —á–∏—Å—Ç–æ –æ–ø–∏—Å—É–≤–∞—Ç–∏ –±—ñ–∑–Ω–µ—Å-–ª–æ–≥—ñ–∫—É –≤–∏–±—ñ—Ä–∫–∏ –¥–∞–Ω–∏—Ö:

```csharp
// –ü–æ—à—É–∫ —Ç–æ–≤–∞—Ä—ñ–≤ –∑–∞ –∫—Ä–∏—Ç–µ—Ä—ñ—è–º–∏, –≤–∫–ª—é—á–µ–Ω–Ω—è –∫–∞—Ç–µ–≥–æ—Ä—ñ–π —Ç–∞ –ø–∞–≥—ñ–Ω–∞—Ü—ñ—è
var spec = new ProductWithCategorySpecification(productParams);
var products = await _productsRepo.ListAsync(spec);

```

### MediatR Handler (CQRS)

–Ü–∑–æ–ª—å–æ–≤–∞–Ω–∞ –ª–æ–≥—ñ–∫–∞ –æ–±—Ä–æ–±–∫–∏ –æ–¥–Ω—ñ—î—ó –∫–æ–º–∞–Ω–¥–∏ (—Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –≤—ñ–¥–≥—É–∫—É):

```csharp
public async Task<Review> Handle(CreateReviewCommand request, CancellationToken ct)
{
    var newReview = new Review { ... };
    await _reviews.InsertOneAsync(newReview, cancellationToken: ct);
    return newReview;
}

```

### Unit of Work (Dapper)

–£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü—ñ—î—é –ø—Ä–∏ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—ñ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è:

```csharp
try {
    _unitOfWork.BeginTransaction();
    var orderId = _unitOfWork.Orders.Create(order);
    _unitOfWork.Commit(); // –ó–±–µ—Ä–µ–∂–µ–Ω–Ω—è –∑–º—ñ–Ω —Ç—ñ–ª—å–∫–∏ —è–∫—â–æ –≤—Å–µ –ø—Ä–æ–π—à–ª–æ —É—Å–ø—ñ—à–Ω–æ
} catch {
    _unitOfWork.Rollback(); // –í—ñ–¥–∫–∞—Ç, —è–∫—â–æ –≤–∏–Ω–∏–∫–ª–∞ –ø–æ–º–∏–ª–∫–∞
}

```

---
